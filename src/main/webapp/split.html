<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>CCS Trending Demo</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="split-pane/split-pane.css" />
        <link rel="stylesheet" href="split-pane/pretty-split-pane.css" />        
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/jstree/3.2.1/themes/default/style.min.css" />
        <script src="//code.jquery.com/jquery-3.2.1.min.js"></script>
        <script src="//cdnjs.cloudflare.com/ajax/libs/jstree/3.2.1/jstree.min.js"></script>
        <script src="split-pane/split-pane.js"></script>
        <script src="//cdnjs.cloudflare.com/ajax/libs/dygraph/1.1.1/dygraph-combined.js"></script>
        <script src="CCSTrending.js"></script>
        <script src="css-element-queries/ResizeSensor.js"></script>
        <script src="css-element-queries/ElementQueries.js"></script>

        <style type="text/css">

            html, body {
                height: 100%;
                min-height: 100%;
                margin: 0;
                padding: 0;
            }

            #left-component {
                min-width: 10em;
                width: 20em;
            }

            #my-divider {
                left: 20em;
                width: 5px;
            }

            #right-component {
                left: 20em;
                margin-left: 5px;
            }
        </style>
        <script>
            $(function () {
                $('div.split-pane').splitPane();
            });
        </script>
    </head>
    <body>
        <div class="pretty-split-pane-frame"><!-- This div is added for styling purposes only. It's not part of the split-pane plugin. -->
            <div class="split-pane fixed-left">
                <div class="split-pane-component" id="left-component">
                    <div class="pretty-split-pane-component-inner"><!-- This div is added for styling purposes only. It's not part of the split-pane plugin. -->
                        <div id="channel_tree"></div>
                    </div>
                </div>
                <div class="split-pane-divider" id="my-divider"></div>
                <div class="split-pane-component" id="right-component">
                    <div class="pretty-split-pane-component-inner"><!-- This div is added for styling purposes only. It's not part of the split-pane plugin. -->
                        <div id="graph" style="width:100%;height:400px"></div>
                    </div>
                </div>
            </div>
        </div>
        <script type="text/javascript">
            $('#channel_tree').jstree({
                'plugins': ['dnd'],
                'core': {
                    'data': {
                        'url': 'rest/channels',
                        'data': function (node) {
                            if (node.id === '#')
                                return {};
                            else
                                return {'id': node.id};
                        }
                    }
                }
            });
            var element = document.getElementById("graph")
            g = new CCSTrendingPlot(element, {
                title: 'TS7-1 vacuum and temperatures',
                data: {
                    1201: {title: 'cold_1'},
                    1202: {title: 'cold_2'},
                    1203: {title: 'cryo'},
                    1215: {title: 'pressure', axis: 'y2'}
                }
            });
            new ResizeSensor(element, function() {
               g.resize();
            });
        </script>
    </body>
</html>
